<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Patch and test Magento Commerce | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.0/cloud/project/project-patch.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.0/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/project/project-patch.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/project/project-patch.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/project/project-patch.html">Magento 2.2 RC</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="https://magento.com/tech-resources/download" target="_blank">Get Started with Magento DevBox Beta</a></li>
            <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/cloud/bk-cloud.html">Enterprise Cloud Edition Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.0/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Magento Enterprise Cloud Guide</h4>





		<ul>

		

		

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/bk-cloud.html">Welcome to Magento Enterprise Cloud Edition</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/welcome/10000-ft-overview.html">10,000 ft overview</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/welcome/discover-workflow.html">Develop and Deploy Workflow</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/requirements/cloud-requirements.html">Magento Enterprise Cloud Edition requirements</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/requirements/cloud-requirements-license.html">License and authentication requirements</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/requirements/cloud-requirements-git.html">Git requirements</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes.html">Magento Enterprise Cloud Edition Release Notes</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes101.4.html">magento-cloud-configuration release 101.4.x Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes2.1.4.html">Magento Enterprise Cloud Edition 2.1.4 and 2.0.12 Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes2.1.3.html">Magento Enterprise Cloud Edition 2.1.3 and 2.0.11 Release Notes</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/before/before-project-owner.html">Account owner tasks</a></li>
									
								

									


								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/reference/discover-arch.html">Architecture</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/discover-deploy.html">Deployment process</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/git-integration.html">How Cloud Uses Git</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/cloud-composer.html">How Cloud Uses Composer</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/access-acct/first-time-setup.html">First-time development setup</a></li>
									
								

									


								

									

										<li class="level3Parent " id="workspace"><a href="#">Set up an environment and install Magento locally</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace.html">Set up a project and dev workspace</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-setup-env-2_clone.html">Clone the project</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-setup-env-keys.html">Set up Magento authentication keys</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-setup-env-cron.html">Set up Magento cron</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-setup-env-env.html">Branch an environment</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-setup-env-install.html">Install Magento</a>


									

								

									

										<li class="level3Parent " id="import"><a href="#">Import an existing Magento project</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/fastly.html">Set up Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/first-time-setup_dir-structure.html">Project directory structure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/trouble.html">Troubleshoot deployment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/integration-ip-addr.html">Public IP addresses for integration environments</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/project/projects.html">Manage your project</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-start.html">Get started with a project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/user-admin.html">Manage users</a></li>

									

								

									

										<li class="level3Parent " id="patch-upgrade"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade " data-menunode="patch-upgrade"><a href="/guides/v2.0/cloud/project/project-upgrade.html">Upgrade and test Magento Commerce</a>


									

								

									


											<li class="level3Child patch-upgrade  active " data-menunode="patch-upgrade"><a href="/guides/v2.0/cloud/project/project-patch.html">Patch and test Magento Commerce</a>


									

								

									

										<li class="level3Parent " id="project"><a href="#">Use the project Web Interface</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-basic.html">Basic project information</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-branch.html">Manage branches</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-snap.html">Snapshots and Backup management</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a></li>

									

								

									

										<li class="level3Parent " id="routes"><a href="#">Configure routes</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-conf-files_routes.html">routes.yaml</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-cache.html">Caching</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-redir.html">Redirects</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-ssi.html">Server side includes</a>


									

								

									

										<li class="level3Parent " id="services"><a href="#">Configure services</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services.html">services.yaml</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-mysql.html">Set up the mysql service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-redis.html">Set up the redis service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-solr.html">Set up the solr service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-elastic.html">Set up the elasticsearch service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-rabbit.html">Set up the rabbitmq service</a>


									

								

									

										<li class="level3Parent " id="integrate"><a href="#">Integrations</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Blackfire integration</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.0/cloud/project/project-integrate-github.html">GitHub integration</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-priv-repos.html">Pull code from a private Git repository</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/env/environments.html">Manage your environments</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-start.html">Get started with an environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH into your environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/cli-ref-topic.html">Magento Cloud CLI reference</a></li>

									

								

									

										<li class="level3Parent " id="vars"><a href="#">Environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_over.html">Overview of environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_cloud.html">Magento Enterprise Cloud Edition environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_magento.html">Magento application environment variables</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/live/stage-prod-live.html">From integration to live</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/stage-prod-over.html">Overview of staging and production</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-sanity-check.html">Build and deploy on local</a></li>

									

								

									

										<li class="level3Parent " id="stage-prod"><a href="#">Migrate to staging and production</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-migrate-prereq.html">Prepare to migrate data</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-test.html">Testing</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-migrate.html">Migrate data</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live.html">Go live</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-prot.html">Protective block</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/trouble/trouble.html">Troubleshooting</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/environments-logs.html">Use logs for troubleshooting</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_fastly.html">Troubleshoot Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-error-HTML-minification.html">Resolve issues with HTML minification</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">How To</span></li>

									


								

									

										<li class="level3Parent " id="patch-upgrade2"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.0/cloud/howtos/upgrade-magento.html">Upgrade and test Magento Commerce</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.0/cloud/howtos/patch-magento.html">Patch and test Magento Commerce</a>


									

								

									

										<li class="level3Parent " id="update-extensions"><a href="#">Install and update extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/install-components.html">Install extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/update-components.html">Update extensions</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/custom-theme.html">Install a theme</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/sample-data.html">Install optional sample data</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/debug.html">Run a PHP debugger</a></li>

									

								

								
								



						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.0/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Enterprise Cloud Edition</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Patch and test Magento Commerce</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Patch and test Magento Commerce</h1>

  


</section>


			<div>

  <p>This topic discusses how to test patches to your Magento Commerce (Cloud) system locally before you push them to the remote server. We strongly recommend you test patches locally so you can identify and resolve any issues.</p>

  <p>When you perform a Magento Commerce upgrade, you automatically upgrade with patches and hotfixes through the <code>composer update</code> command. If you upgrade a Cloud patch without upgrading the full Magento Commerce application, see <a href="#upgrade-patch">Upgrade a Magento Commerce patch</a>. To upgrade and test a full Magento Commerce version (including patches and hotfixes), see <a href="/guides/v2.0/cloud/project/project-upgrade.html">Upgrade and test Magento Commerce</a>.</p>

  <div class="bs-callout bs-callout-info" id="info">
    <p>We recommend installing full Magento Commerce upgrades for important security updates. Full upgrades include all associated patches and hotfixes.</p>
  </div>

  <p>There are two types of patches:</p>

  <ul>
    <li>
      <p><a href="#cloud-patch-gen">General patches</a></p>

      <p>These patches are provided for all Magento Commerce customers in a GitHub repository that’s referenced in your <code>composer.json</code>. We apply these patches automatically during the build phase.</p>

      <p>To install general patches, use <code>composer update</code>, test your system, and push the patches to the remote server.</p>
    </li>
    <li>
      <p><a href="#cloud-patch-custom">Custom patches</a></p>

      <p>Custom patches can be provided by Magento to address a specific issue you raised in a Support ticket. Third-party extension developers can also provide a custom patch.</p>

      <p>Copy custom patches to the <code>m2-hotfixes</code> directory and test them on your locally. After successfully testing them, push the patches to the remote server.</p>
    </li>
  </ul>

  <div class="bs-callout bs-callout-warning">
    <p>Always test a patch your local system. When complete, push the local Git branch to deploy your <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-int">Integration environment</a> environment. Resolve any issues before you deploy to <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-stage">Staging</a> or <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-prod">Production</a>.</p>
  </div>

  <p>For more information on Composer, see <a href="/guides/v2.0/cloud/reference/cloud-composer.html">Composer in Cloud</a>.</p>

  <h2 id="upgrade-patch">Upgrade a Magento Commerce patch</h2>
  <p>When you perform a Magento Commerce upgrade, you automatically upgrade with patches and hotfixes through the <code>composer update</code> command.</p>

  <h3 id="back-up-the-database">Back up the database</h3>
  <p>Back up your Integration environment database and code:</p>

  <ol>
    <li>
      <p>Enter the following command to make a local backup of the remote database:</p>

      <pre><code>magento-cloud environment:mysql-dump
</code></pre>
    </li>
    <li>
      <p>Enter the following command to back up code and media:</p>

      <pre><code>php bin/magento setup:backup --code [--media]
</code></pre>

      <p>You can optionally omit <code>[--media]</code> if you have a large number of static files that are already in source control.</p>
    </li>
  </ol>

  <p>Back up your Staging or Production environment database before deploying to those environments:</p>

  <ol>
    <li><a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH to the server</a>.</li>
    <li>
      <p>Find the database login information:</p>

      <pre><code>php -r 'print_r(json_decode(base64_decode($_ENV["MAGENTO_CLOUD_RELATIONSHIPS"]))-&gt;database);'
</code></pre>
    </li>
    <li>
      <p>Create a database dump:</p>

      <pre><code>mysqldump -h &lt;database host&gt; --user=&lt;database user name&gt; --password=&lt;password&gt; --single-transaction &lt;database name&gt; | gzip - &gt; /tmp/database.sql.gz
</code></pre>
    </li>
  </ol>

  <h3 id="verify-other-changes">Verify other changes</h3>
  <p>Verify other changes you’re going to submit to source control before you start the upgrade:</p>

  <ol>
    <li>If you haven’t done so already, change to your project root directory.</li>
    <li>
      <p>Enter the following command:</p>

      <pre><code>git status
</code></pre>
    </li>
    <li>If there are changes you do <em>not</em> want to submit to source control, branch or stash them now.</li>
  </ol>

  <h3 id="upgrade-the-patch">Upgrade the patch</h3>

  <ol>
    <li>
      <p>Change to your Magento base directory and enter the following command:</p>

      <pre><code>composer update
</code></pre>

      <p>This command automatically upgrades for patches associated to the installed Magento Commerce version.</p>
    </li>
    <li>
      <p>Add, commit, and push your changes to initiate a deployment:</p>

      <pre><code>git add -A
git commit -m "Upgrade patch"
git push origin &lt;branch name&gt;
</code></pre>

      <p><code>git add -A</code> is required to add all changed files to source control because of the way Composer marshals base packages.</p>

      <p>The files Composer marshals belong to the new version of Magento, to overwrite the outdated version of those same files. Currently, marshaling is disabled in Magento Commerce, so you must add the marshaled files to source control.</p>
    </li>
    <li>
      <p>Wait for deployment to complete.</p>
    </li>
  </ol>

  <h2 id="cloud-patch-gen">Test general patches</h2>
  <p><em>General patches</em> are provided for all Magento Commerce customers in a repository referenced in your <code>composer.json</code>. We apply patches automatically during the build phase when a patch is available. The procedure discussed in this section enables to you test a patch locally anytime you choose.</p>

  <p>The procedure you use is slightly different, depending on the type of environment: <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-int">integration</a>, <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-stage">staging</a>, or <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-prod">production</a>.</p>

  <h3 id="gen-getstarted">Get started</h3>
  <p>We recommend you test a patch in the <code>master</code> branch.</p>

  <div>

    <ol>
      <li>Log in to your local development system, or switch to, the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
      <li>Change to a directory to which the Magento file system owner has write access.</li>
      <li>
        <p>Log in to your project:</p>

        <pre><code>magento-cloud login
</code></pre>
      </li>
      <li>
        <p>List your projects:</p>

        <pre><code>magento-cloud project:list
</code></pre>
      </li>
      <li>
        <p>If necessary, clone a project.</p>

        <pre><code>magento-cloud project:get &lt;project ID&gt;
</code></pre>
      </li>
      <li>
        <p>Change to a project directory.</p>

        <p>For example, <code>cd /var/www/html/magento2</code></p>
      </li>
      <li>
        <p>List environments in the project:</p>

        <pre><code>magento-cloud environment:list
</code></pre>

        <div class="bs-callout bs-callout-info" id="info">
  		<p><code>magento-cloud environment:list</code> displays environment hierarchies whereas <code>git branch</code> displays does not. If you have any nested environments, use <code>magento-cloud environment:list</code>.</p>
</div>
      </li>
      <li>
        <p>Fetch origin branches:</p>

        <pre><code>git fetch origin
</code></pre>
      </li>
      <li>
        <p>Check out an environment:</p>

        <pre><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre>

        <p>To create a new environment, use <code>magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
      </li>
      <li>
        <p>Pull updated code:</p>

        <pre><code>git pull origin &lt;environment ID&gt;
</code></pre>
      </li>
      <li>
        <p>Create a <a href="/guides/v2.0/cloud/project/project-webint-snap.html">snapshot</a> of the environment.</p>

        <pre><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre>
      </li>
    </ol>

    <h3 id="gen-testlocal">Test a general patch on your local system</h3>

    <p>To test a general patch on your local system:</p>

    <ol>
      <li>
        <p>On your local system, enter the following commands as the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>:</p>

        <pre><code>cd &lt;project root dir&gt;
magento-cloud environment:checkout master
git pull origin master
composer update
</code></pre>
      </li>
      <li>
        <p>Apply the patch locally:</p>

        <pre><code>git apply vendor/magento/magento-cloud-configuration/patches/&lt;patch file name&gt;
</code></pre>
      </li>
      <li>
        <p>Clean the Magento cache:</p>

        <pre><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre>

        <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
      </li>
      <li>Thoroughly test your local system to make sure the patch doesn’t have unexpected side-affects.</li>
      <li>
        <p>After testing the patch, push it to the remote server and deploy it:</p>

        <pre><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre>
      </li>
    </ol>

    <h3 id="gen-pushpatch">Push a general patch to the staging or production environment</h3>
    <p>After you’ve successfully tested a patch locally and on your integration environment, you can push the patch to staging or production as follows:</p>

    <ol>
      <li>
        <p>Open an SSH connection to your staging or production server:</p>

        <ul>
          <li>Staging: <code>ssh -A &lt;project ID&gt;_stg@&lt;project ID&gt;.ent.magento.cloud</code></li>
          <li>Production: <code>ssh -A &lt;project ID&gt;@&lt;project ID&gt;.ent.magento.cloud</code></li>
        </ul>
      </li>
      <li>
        <p>Enter the following commands:</p>

        <pre><code>&lt;Magento project root dir&gt;/composer update
</code></pre>
      </li>
      <li>
        <p>Apply the patch locally:</p>

        <pre><code>git apply vendor/magento/magento-cloud-configuration/patches/&lt;patch file name&gt;
</code></pre>
      </li>
      <li>
        <p>Clean the Magento cache:</p>

        <pre><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre>

        <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
      </li>
      <li>Thoroughly test your local system to make sure the patch doesn’t have unexpected side-affects.</li>
      <li>
        <p>After testing the patch, push it to the remote server and deploy it:</p>

        <pre><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin master
</code></pre>
      </li>
    </ol>

    <h2 id="cloud-patch-custom">Test custom patches</h2>
    <p><em>Custom patches</em> are provided to specific customers in a Support ticket. Before you continue, make sure the patch file we provided you is available.</p>

    <p>The procedure you use is slightly different, depending on the type of environment: <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-int">integration</a>, <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-stage">staging</a>, or <a href="/guides/v2.0/cloud/reference/discover-arch.html#cloud-arch-prod">production</a>.</p>

    <h3 id="custom-getstarted">Get started</h3>
    <p>We recommend you test a patch locally in the <code>master</code> branch.</p>

    <div>

      <ol>
        <li>Log in to your local development system, or switch to, the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
        <li>Change to a directory to which the Magento file system owner has write access.</li>
        <li>
          <p>Log in to your project:</p>

          <pre><code>magento-cloud login
</code></pre>
        </li>
        <li>
          <p>List your projects:</p>

          <pre><code>magento-cloud project:list
</code></pre>
        </li>
        <li>
          <p>If necessary, clone a project.</p>

          <pre><code>magento-cloud project:get &lt;project ID&gt;
</code></pre>
        </li>
        <li>
          <p>Change to a project directory.</p>

          <p>For example, <code>cd /var/www/html/magento2</code></p>
        </li>
        <li>
          <p>List environments in the project:</p>

          <pre><code>magento-cloud environment:list
</code></pre>

          <div class="bs-callout bs-callout-info" id="info">
  		<p><code>magento-cloud environment:list</code> displays environment hierarchies whereas <code>git branch</code> displays does not. If you have any nested environments, use <code>magento-cloud environment:list</code>.</p>
</div>
        </li>
        <li>
          <p>Fetch origin branches:</p>

          <pre><code>git fetch origin
</code></pre>
        </li>
        <li>
          <p>Check out an environment:</p>

          <pre><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre>

          <p>To create a new environment, use <code>magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
        </li>
        <li>
          <p>Pull updated code:</p>

          <pre><code>git pull origin &lt;environment ID&gt;
</code></pre>
        </li>
        <li>
          <p>Create a <a href="/guides/v2.0/cloud/project/project-webint-snap.html">snapshot</a> of the environment.</p>

          <pre><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre>
        </li>
      </ol>

      <h3 id="custom-testlocal">Test a custom patch on your local system</h3>

      <p>To test a custom patch on your local system:</p>

      <ol>
        <li>
          <p>On your local system, enter the following command as the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a> if you haven’t done so already:</p>

          <pre><code>mkdir &lt;Magento project root dir&gt;/m2-hotfixes
</code></pre>
        </li>
        <li>Copy the patch file to that directory.</li>
        <li>
          <p>Apply the patch locally:</p>

          <pre><code>cd &lt;Magento project root dir&gt;
magento-cloud environment:checkout master
git pull origin master
git apply &lt;Magento project root dir&gt;/m2-hotfixes/&lt;patch file name&gt;
</code></pre>
        </li>
        <li>
          <p>Clean the Magento cache:</p>

          <pre><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre>

          <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
        </li>
        <li>
          <p>After testing the patch, push it to the remote server and deploy it:</p>

          <pre><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre>
        </li>
      </ol>

      <h3 id="custom-pushpatch">Push a custom patch to a staging or production environment</h3>

      <p>After you’ve successfully tested a custom patch locally and on your integration environment, you can push the patch to staging or production as follows:</p>

      <ol>
        <li>
          <p>Open an SSH connection to your staging or production server:</p>

          <ul>
            <li>Staging: <code>ssh -A &lt;project ID&gt;_stg@&lt;project ID&gt;.ent.magento.cloud</code></li>
            <li>Production: <code>ssh -A &lt;project ID&gt;@&lt;project ID&gt;.ent.magento.cloud</code></li>
          </ul>
        </li>
        <li>
          <p>On your staging or production system, enter the following command if you haven’t done so already:</p>

          <pre><code>mkdir &lt;Magento project root dir&gt;/m2-hotfixes
</code></pre>
        </li>
        <li>
          <p>Copy the patch file to that directory.</p>

          <p>We suggest using the following command:</p>

          <pre><code>rsync -azvP &lt;source&gt; &lt;destination&gt;
</code></pre>

          <p>Options:</p>

          <p><code>a</code> archive</p>

          <p><code>z</code> compress</p>

          <p><code>v</code> verbose</p>

          <p><code>P</code> partial progress</p>

          <p>For additional options, see the <a href="http://linux.die.net/man/1/rsync" target="_blank">rsync man page</a>.</p>
        </li>
        <li>
          <p>Apply the patch:</p>

          <pre><code>git apply &lt;Magento project root dir&gt;/m2-hotfixes/&lt;patch file name&gt;
</code></pre>
        </li>
        <li>
          <p>Clean the Magento cache:</p>

          <pre><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre>

          <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
        </li>
        <li>
          <p>After testing the patch, push it to the remote server and deploy it:</p>

          <pre><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre>
        </li>
      </ol>

    </div>
  </div>
</div>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/cloud/project/project-patch.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.0/cloud/project/project-patch.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

