<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Set up multiple Cloud websites or stores | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/cloud/project/project-multi-sites.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.2/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/project/project-multi-sites.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/project/project-multi-sites.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/project/project-multi-sites.html">Magento 2.2 RC</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="https://magento.com/tech-resources/download" target="_blank">Get Started with Magento DevBox Beta</a></li>
            <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Enterprise Cloud Edition Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="//search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

    
    <div class="message-banner">
        Review our 2.2 release candidate!  This beta version documentation includes B2B and more. <a href="/guides/v2.2/release-notes/release-candidate/quick-start.html">See the Quickstart Guide</a><br/>
        Stay tuned â€” We'll roll out more 2.2 documentation updates in the coming weeks.
    </div> 
    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Magento Enterprise Cloud Guide</h4>





		<ul>

		

		

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/bk-cloud.html">Welcome to Magento Enterprise Cloud Edition</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/welcome/10000-ft-overview.html">10,000 ft overview</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/welcome/discover-workflow.html">Workflow</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/welcome/get-help.html">Get help with your deployment</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/requirements/cloud-requirements.html">Magento Enterprise Cloud Edition requirements</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/requirements/cloud-requirements-license.html">License and authentication requirements</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/requirements/cloud-requirements-git.html">Git requirements</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/release-notes/CloudReleaseNotes.html">Magento Enterprise Cloud Edition Release Notes</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/release-notes/CloudReleaseNotes101.4.html">magento-cloud-configuration release 101.4.1 Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/release-notes/CloudReleaseNotes2.1.4.html">Magento Enterprise Cloud Edition 2.1.4 and 2.0.12 Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/release-notes/CloudReleaseNotes2.1.3.html">Magento Enterprise Cloud Edition 2.1.3 and 2.0.11 Release Notes</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/before/before-project-owner.html">Account owner tasks</a></li>
									
								

									


								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/access-acct/first-time-setup.html">First-time setup (developers)</a></li>
									
								

									


								

									

										<li class="level3Parent " id="workspace"><a href="#">Set up a Magento workspace</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace.html">Overview of a Magento workspace</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-cloud-account.html">Step 1, Set up an account</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-cli.html">Step 2, Install the CLI</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-ssh.html">Step 3, Enable Secure Shell (SSH)</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html">Step 4, Install Magento prerequisites</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-php.html">Step 5, Set up PHP and MySQL</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Step 6, Set up the Magento file system owner</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/access-acct/first-time-setup_template.html">Create a new Magento project</a></li>

									

								

									

										<li class="level3Parent " id="import"><a href="#">Import an existing Magento project</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>


									

								

									

										<li class="level3Parent " id="setupenv"><a href="#">Set up an environment and install Magento locally</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-1_get-start.html">Step 1, Get started setting up an environment</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-2_clone.html">Step 2, Clone the project</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-keys.html">Step 3, Set up authentication keys</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-cron.html">Step 4, Set up cron</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-env.html">Step 5, Clone or branch an environment</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-install.html">Step 6, Install Magento</a>


									

								

									


											<li class="level3Child setupenv " data-menunode="setupenv"><a href="/guides/v2.2/cloud/before/before-setup-env-perms.html">Step 7, Set file system permissions and ownership</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/access-acct/fastly.html">Set up Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/access-acct/resources.html">Magento 2 resources</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/access-acct/first-time-setup_dir-structure.html">Project directory structure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/access-acct/trouble.html">Troubleshoot deployment</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/project/projects.html">Manage your project</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/project/project-start.html">Get started with a project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/project/user-admin.html">Manage users</a></li>

									

								

									

										<li class="level3Parent " id="patch-upgrade"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade " data-menunode="patch-upgrade"><a href="/guides/v2.2/cloud/project/project-upgrade.html">Test a Magento upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade " data-menunode="patch-upgrade"><a href="/guides/v2.2/cloud/project/project-patch.html">Test a Magento patch</a>


									

								

									

										<li class="level3Parent " id="project"><a href="#">Use the project Web Interface</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.2/cloud/project/project-webint-basic.html">Basic project information</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.2/cloud/project/project-webint-branch.html">Manage environments (branches)</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.2/cloud/project/project-webint-snap.html">Backup and restore (snapshot)</a>


									

								

									

									<li class="level-2  active "><a href="/guides/v2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a></li>

									

								

									

										<li class="level3Parent " id="routes"><a href="#">Configure routes</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.2/cloud/project/project-conf-files_routes.html">routes.yaml</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.2/cloud/project/project-routes-more-cache.html">Caching</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.2/cloud/project/project-routes-more-redir.html">Redirects</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a>


									

								

									

										<li class="level3Parent " id="services"><a href="#">Configure services</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services.html">services.yaml</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services-mysql.html">Set up the mysql service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services-redis.html">Set up the redis service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services-solr.html">Set up the solr service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services-elastic.html">Set up the elasticsearch service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.2/cloud/project/project-conf-files_services-rabbit.html">Set up the rabbitmq service</a>


									

								

									

										<li class="level3Parent " id="integrate"><a href="#">Integrations</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Blackfire integration</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.2/cloud/project/project-integrate-github.html">GitHub integration</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/project/project-priv-repos.html">Pull code from a private Git repository</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/env/environments.html">Manage your environments</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/env/environments-start.html">Get started with an environment</a></li>

									

								

									

										<li class="level3Parent " id="vars"><a href="#">Environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.2/cloud/env/environment-vars_over.html">Overview of environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.2/cloud/env/environment-vars_cloud.html">Magento Enterprise Cloud Edition environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.2/cloud/env/environment-vars_magento.html">Magento application environment variables</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/reference/discover-arch.html">Architecture</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/reference/discover-deploy.html">Deployment process</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/reference/git-integration.html">How Cloud Uses Git</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/reference/cloud-composer.html">How Cloud Uses Composer</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/live/stage-prod-live.html">From integration to live</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/live/stage-prod-over.html">Overview of staging and production</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/live/live-sanity-check.html">Build and deploy before pushing to staging or production</a></li>

									

								

									

										<li class="level3Parent " id="stage-prod"><a href="#">Migrate to staging and production</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to migrate data</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.2/cloud/live/stage-prod-test.html">Testing</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.2/cloud/live/stage-prod-migrate.html">Migrate data</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/live/live.html">Go live</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/live/live-prot.html">Protective block</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/cloud/trouble/trouble.html">Troubleshooting</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/trouble/environments-logs.html">Use logs for troubleshooting</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/trouble/trouble_fastly.html">Troubleshoot Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">40_live</span></li>

									


								

									


											<li class="level3Child config-ref " data-menunode="config-ref"><a href="/guides/v2.2/cloud/live/config-reference-most.html">All configuration paths except payments reference</a>


									

								

									


											<li class="level3Child config-ref " data-menunode="config-ref"><a href="/guides/v2.2/cloud/live/config-reference-payment.html">Payment configuration paths reference</a>


									

								

									


											<li class="level3Child config-ref " data-menunode="config-ref"><a href="/guides/v2.2/cloud/live/config-reference-sens.html">Sensitive configuration paths reference</a>


									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">How To</span></li>

									


								

									

										<li class="level3Parent " id="patch-upgrade2"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.2/cloud/howtos/upgrade-magento.html">Test a Magento upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.2/cloud/howtos/patch-magento.html">Test a Magento patch</a>


									

								

									

										<li class="level3Parent " id="update-extensions"><a href="#">Install and update extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.2/cloud/howtos/install-components.html">Install extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.2/cloud/howtos/update-components.html">Update extensions</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/howtos/custom-theme.html">Install a theme</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/howtos/sample-data.html">Install optional sample data</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/cloud/howtos/debug.html">Run a PHP debugger</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">Live</span></li>

									


								

									

										<li class="level3Parent " id="sens-data"><a href="#">Manage the configuration</a>


									

								

									


											<li class="level3Child sens-data " data-menunode="sens-data"><a href="/guides/v2.2/cloud/live/sens-data-over.html">Overview of configuration management</a>


									

								

									


											<li class="level3Child sens-data " data-menunode="sens-data"><a href="/guides/v2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a>


									

								

								
								



						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.2/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Enterprise Cloud Edition</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Set up multiple Cloud websites or stores</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Set up multiple Cloud websites or stores</h1>

  


</section>


			<h2 id="set-up-multiple-stores">Set up multiple stores</h2>
<p>This topic discusses how to set up Magento Enterprise Cloud Edition to have multiple websites or stores; for example, you might have an English store, a French store, and a German store.</p>

<p>To set up multiple stores, you must:</p>

<ol>
  <li><a href="/guides/v2.2/config-guide/multi-site/ms_over.html">Configure your local installation</a> and test it locally.</li>
  <li>Configure Magento Enterprise Cloud edition routes and variables.</li>
  <li>Push the changes to an <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-int">integration environment</a> and test it.</li>
  <li>To deploy multiple stores to a <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-stage">staging</a> or <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-prod">production</a> environment, create a support ticket.</li>
</ol>

<h2 id="configure-your-local-installation">Configure your local installation</h2>
<p>To configure your local installation to use multiple stores, see <a href="/guides/v2.2/config-guide/multi-site/ms_over.html">Multiple websites or stores</a>.</p>

<h2 id="configure-your-integration-environment">Configure your integration environment</h2>
<p>After successfully creating and testing multiple stores locally, you must:</p>

<ol>
  <li><a href="#cloud-multi-stores-routes">Configure routes</a>, which specify how incoming URLs are handled by Magento Enterprise Cloud Edition.</li>
  <li><a href="#cloud-multi-stores-admin">Set up websites, stores, and store views</a> in your Magento Enterprise Cloud Edition serverâ€™s <span term-uuid="29ddb393-ca22-4df9-a8d4-0024d75739b1" class="glossary-term" data-toggle="popover">Admin</span>.</li>
  <li><a href="#cloud-multi-stores-magento-vars">Modify <code>magento-vars.php</code></a> to specify the values of the <code>MAGE_RUN_TYPE</code> and <code>MAGE_RUN_CODE</code> variables.</li>
  <li><a href="#cloud-multi-stores-deploy">Deploy</a> to your integration branch and test.</li>
</ol>

<h3 id="cloud-multi-stores-routes">Configure routes</h3>
<p>Magento Enterprise Edition <em>routes</em> define how incoming URLs are processed. The way you configure routes depends on how you want your site to operate. We suggest configuring routes for integration as follows. You can edit the values later if your needs change.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>This section discusses how to configure your <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-int">integration environment</a> only. To set up routes in a staging or production environment, you must create a <a href="/guides/v2.2/cloud/welcome/get-help.html">Support ticket</a>.</p>
</div>

<p>To configure routes in an integration environment:</p>

<ol>
  <li>Log in to your local environment as, or switch to, the <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
  <li>Change to your Magento Enterprise Cloud Edition base directory.</li>
  <li>Open <code>.magento/routes.yaml</code> in a text editor.</li>
  <li>
    <p>Replace its contents with the following:</p>

    <pre><code>"http://{default}/":
	type: upstream
	upstream: "mymagento:php"
 
"https://{default}/":
	type: upstream
	upstream: "mymagento:php"
 
"http://*.{default}/":
	type: upstream
	upstream: "mymagento:php"
 
"https://*.{default}/":
	type: upstream
	upstream: "mymagento:php"
</code></pre>
  </li>
  <li>Save your changes to <code>routes.yaml</code> and exit the text editor.</li>
</ol>

<h3 id="cloud-multi-stores-admin">Set up websites, stores, and store views</h3>
<p>Set up in your Magento Enterprise Cloud Edition Admin websites, stores, and store views identical to the ones you set up on your local system.</p>

<h4 id="get-your-access-information">Get your access information</h4>
<p>To get the access information you need to log in to the Magento Admin:</p>

<ol>
  <li>If you havenâ€™t done so already, log in to your local environment as, or switch to, the <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
  <li>Change to your Magento Enterprise Cloud Edition base directory.</li>
  <li>
    <p>Log in to your Magento Enterprise Cloud Edition account:</p>

    <pre><code>magento-cloud login
</code></pre>
  </li>
  <li>
    <p>List the environments:</p>

    <pre><code>magento-cloud environment:list
</code></pre>
  </li>
  <li>
    <p>Check out your environment:</p>

    <pre><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre>
  </li>
  <li>
    <p>View the environmentâ€™s access URLs:</p>

    <pre><code>magento-cloud environment:url
</code></pre>
  </li>
  <li>
    <p>View Admin login information:</p>

    <pre><code>magento-cloud variable:list
</code></pre>

    <p>Admin access information displays similar to the following:</p>

    <pre><code>+----------------+---------------+-----------+------+
| ID             | Value         | Inherited | JSON |
+----------------+---------------+-----------+------+
| ADMIN_PASSWORD | admin_A456    | Yes       | No   |
| ADMIN_URL      | magento_A8v10 | Yes       | No   |
| ADMIN_USERNAME | meister_x2U8  | Yes       | No   |
+----------------+---------------+-----------+------+
</code></pre>
  </li>
</ol>

<h4 id="configure-websites-stores-and-store-views">Configure websites, stores, and store views</h4>
<p>Make sure you name your websites, stores, and store views in your Cloud Admin the same as you did when you set up your local installation.</p>

<p>See <a href="/guides/v2.2/config-guide/multi-site/ms_websites.html">Set up multiple websites, stores, and store views in the Admin</a>.</p>

<h3 id="cloud-multi-stores-magento-vars">Modify <code>magento-vars.php</code></h3>
<p>Instead of configuring an <span term-uuid="b14ef3d8-51fd-48fe-94df-ed069afb2cdc" class="glossary-term" data-toggle="popover">nginx</span> virtual host, pass the <code>MAGE_RUN_CODE</code> and <code>MAGE_RUN_TYPE</code> variables using <code>magento-vars.php</code> which is located in your Magento root directory.</p>

<ol>
  <li>Open <code>magento-vars.php</code> in a text editor.</li>
  <li>Uncomment everything after the first two lines.</li>
  <li>
    <p>Move the entire block starting with <code>if (isHttpHost("example.com")</code> after <code>function isHttpHost($host)</code>.</p>

    <p>Following is what the file should look like so far:</p>

    <pre class="no-copy">&lt;?php
    // enable, adjust and copy this code for each store you run
    // Store #0, default one
    function isHttpHost($host)
    {
       if (!isset($_SERVER['HTTP_HOST'])) {
           return false;
    }
           return strpos(str_replace('---', '.', $_SERVER['HTTP_HOST']), $host) === 0;
    }
    if (isHttpHost("example.com")) {
        $_SERVER["MAGE_RUN_CODE"] = "default";
        $_SERVER["MAGE_RUN_TYPE"] = "store";
    }</pre>
  </li>
  <li>
    <p>Change the following line:</p>

    <p>From:</p>

    <pre><code>return strpos(str_replace('---', '.', $_SERVER['HTTP_HOST']), $host) === 0;
</code></pre>

    <p>To:</p>

    <pre><code>return $_SERVER['HTTP_HOST'] ===  $host;
</code></pre>
  </li>
  <li>
    <p>Replace the following values in the <code>if (isHttpHost("example.com"))</code> block:</p>

    <ul>
      <li><code>"example.com"</code> with the base URL of your website, replacing the first period with three dashes.</li>
      <li><code>"default"</code> with the unique code for your website or store view.</li>
      <li><code>"store"</code> with either <code>website</code> (to load the website in the storefront) or <code>store</code> (to load a storeview in the storefront).</li>
    </ul>

    <p>An example follows:</p>

    <pre><code>&lt;?php
// enable, adjust and copy this code for each store you run
// Store #0, default one
function isHttpHost($host)
{
	if (!isset($_SERVER['HTTP_HOST'])) {
		return false;
	}
	 return $_SERVER['HTTP_HOST'] ===  $host;
}
if (isHttpHost("french---branch-sbg7pPa-f3dueAiM03tpy.us.magentosite.cloud")) {
	$_SERVER["MAGE_RUN_CODE"] = "french";
	$_SERVER["MAGE_RUN_TYPE"] = "website";
}
</code></pre>
  </li>
  <li>Save your changes to <code>magento-vars.php</code> and exit the text editor.</li>
</ol>

<h3 id="cloud-multi-stores-deploy">Deploy and test on the integration server</h3>
<p>The final step is to push your changes to your Magento Entperise Cloud Edition server and test your site there.
To deploy and test:</p>

<ol>
  <li>
    <p>Enter the following commands in the order shown:</p>

    <pre><code>git add -A &amp;&amp; git commit -m "Implement multiple sites"
git push origin &lt;branch name&gt;
</code></pre>
  </li>
  <li>Wait for deployment to complete.</li>
  <li>
    <p>When deployment is done, in a web browser, go to your siteâ€™s base <span term-uuid="a05c59d3-77b9-47d0-92a1-2cbffe3f8622" class="glossary-term" data-toggle="popover">URL</span>.</p>

    <p>The URL must be in the format: <code>http://&lt;magento run_code&gt;---&lt;rest of URL&gt;</code></p>

    <p>For example, <code>http://french---master-benrmky-dyrozemqbw72k.us.magentosite.cloud/</code></p>
  </li>
  <li>Make sure you test your site thoroughly.</li>
</ol>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/cloud/project/project-multi-sites.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/cloud/project/project-multi-sites.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

