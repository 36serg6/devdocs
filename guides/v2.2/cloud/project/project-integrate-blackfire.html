<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Blackfire Profiler | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/cloud/project/project-integrate-blackfire.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown" data-version="2.2">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/project/project-integrate-blackfire.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Magento 2.2</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/b2b/bk-b2b.html">B2B Developer Guide</a></li>
          
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" autocomplete="off" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">



<h4>Magento Commerce (Cloud) Guide</h4>
<div class="left-navigation">
    <ul>
    
    

<li class="nav-level1  " id="welcome-to-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/bk-cloud.html">Welcome to Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="starter-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-architecture.html">Starter architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="starter-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-arch.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/welcome/discover-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="onboarding-tasks">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-project-environments">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-project-owner.html">Prepare project environments</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="technologies-and-requirements">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/requirements/cloud-requirements.html">Technologies and requirements</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-github.html">GitHub</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/cloud-fastly.html">Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="blackfire-profiler">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Blackfire Profiler</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="first-time-local-development-setup">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/access-acct/first-time-setup.html">First-time local development setup</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="set-up-a-project-and-dev-workspace">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace.html">Set up a project and dev workspace</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento-prerequisites">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="enable-ssh-keys">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-the-magento-file-system-owner">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="clone-the-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-2_clone.html">Clone the project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-magento-authentication-keys">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-keys.html">Set up Magento authentication keys</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="branch-an-environment">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-env.html">Branch an environment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-install.html">Install Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="first-time-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/first-time-deploy.html">First time deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-an-existing-magento-project">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Import an existing Magento project</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="first-steps-for-importing-magento-ee">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="find-the-information-you-need-for-your-import">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="prepare-your-existing-magento-ee-system">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="import-magento-ee-into-magento-enterprise-cloud-edition">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="configure-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/configure/configuration-overview.html">Configure Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="set-up-fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/fastly.html">Set up Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-fastly-vcl-snippets">
            
            
        
            
            <a href="/guides/v2.2/cloud/configure/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id=".magento.app.yaml">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-routes">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure routes</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="routes.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_routes.html">routes.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="server-side-includes">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-services">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure services</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="services.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services.html">services.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-mysql-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-redis-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="set-up-elasticsearch-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-rabbitmq-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-project">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/projects.html">Manage your project</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="get-started-with-a-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-start.html">Get started with a project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-users">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/user-admin.html">Manage users</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="basic-project-information">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-basic.html">Basic project information</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-branch.html">Manage branches</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="snapshots-and-backup-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-snap.html">Snapshots and Backup management</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-environments">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/env/environments.html">Manage your environments</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="get-started-with-an-environment">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-start.html">Get started with an environment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh-into-your-environment">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH into your environment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-over.html">Configuration management</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="example-of-managing-system-specific-settings">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="environment-variables">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Environment variables</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="overview-of-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_over.html">Overview of environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-application-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_magento.html">Magento application environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-commerce-(cloud)-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_cloud.html">Magento Commerce (Cloud) environment variables</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-reference">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configuration reference</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="all-configuration-paths-except-payments-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-most.html">All configuration paths except payments reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="payment-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-payment.html">Payment configuration paths reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="sensitive-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-sens.html">Sensitive configuration paths reference</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="upgrades-and-patches">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="upgrade-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-upgrade.html">Upgrade Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="patch-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-patch.html">Patch Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="deploy-your-store">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/stage-prod-live.html">Deploy your store</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="deployment-process">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-deploy.html">Deployment process</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="protective-block">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-prot.html">Protective block</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="build-and-deploy-on-local">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="prepare-to-deploy-to-staging-and-production">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="migrate-and-deploy-static-files-and-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate.html">Migrate and deploy static files and data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="test-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-test.html">Test deployment</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="go-live-and-launch">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/live.html">Go live and launch</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="go-live-checklist">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/go-live-checklist.html">Go live checklist</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="launch-steps">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/launch-steps.html">Launch steps</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="troubleshooting">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/trouble/trouble.html">Troubleshooting</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="troubleshoot-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/trouble.html">Troubleshoot deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="view-logs-for-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/environments-logs.html">View logs for troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="incorrect-credentials">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-a-new-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-deployment-failure">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_fastly.html">Fastly troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/redis-troubleshooting.html">Redis troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-encryption-key">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-html-minification">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-google-analytics-during-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-sitemap-and-robots.txt">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/robots-sitemap.html">Add sitemap and robots.txt</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="how-to">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <span>How To</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="install-and-update-extensions">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Install and update extensions</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="install-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/install-components.html">Install extensions</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="update-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/update-components.html">Update extensions</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="merge-and-delete-an-environment-(tutorial)">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-a-theme">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/custom-theme.html">Install a theme</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-optional-sample-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/sample-data.html">Install optional sample data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="run-a-php-debugger">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/debug.html">Run a PHP debugger</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    </ul>
</div>

	</div>

</aside>


<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Commerce (Cloud)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Blackfire Profiler</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Blackfire Profiler</h1>

  


</section>


			<p><a href="https://blackfire.io/profiler" target="_blank">Blackfire Profiler</a> helps you locate and investigate performance issues in your environment at the code-level. it creates a performance profile by tracking every PHP call and method and SQL queries performed by your code. Blackfire digs deeper providing granular performance analytics. You can activate and use Blackfire Profiler in all of your environments, especially helpful in Staging and Production.</p>

<p>This information helps you get Blackfire installed on your local, integrated into Integration, and running your first profile.</p>

<p>For full details on integrations, also review <a href="https://support.blackfire.io/blackfire-on-magento-cloud" target="_blank">Blackfire’s complete Magento Commerce (Cloud)</a> guide. They also include a number of <a href="#resources">incredible resources</a> to get you started.</p>

<p>Blackfire includes the following <a href="https://blackfire.io/docs/reference-guide/environments" target="_blank">environments</a> through their site:</p>

<ul>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;Project ID&gt;)</code> - Dev: This is your Integration environments</li>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;Project ID&gt;)</code> - Test: This is your Staging environment</li>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;Project ID&gt;)</code> - Prod: This is your Production environment</li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>For Pro plans, you need to enter a Support ticket with your Blackfire credentials to get Staging and Production configured with Blackfire. We’ll help you get Blackfire configured in those environments.</p>
</div>

<h2 id="cloud-int-black">Get your Blackfire credentials</h2>
<p>The Project Owner is the account owner. This account’s e-mail address is used as part of the credentials for access to Blackfire for your project. Only the Project Owner credentials can be used to integrate Blackfire with Magento Commerce (Cloud) and to log into the Blackfire site. An invitiation email is sent to the Project Owner’s e-mail address to complete activation.</p>

<p>For information on setting up the account on Blackfire, see <a href="https://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-1-accessing-your-blackfire-account-as-a-magento-cloud-user" target="_blank">Accessing your Blackfire account as a Magento Cloud user</a>.</p>

<h2 id="collaborators">Add collaborator accounts</h2>
<p>After you have accessed your Blackfire account, you can <a href="http://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-2-adding-collaborators-to-the-blackfire-environments" target="_blank">add additional collaborator accounts</a>.</p>

<p>We recommend adding at least one account through Blackfire to manage all access, integrations, and usage of the tool. We also recommend promoting one of the added members to Admin, to manage all Blackfire access and integrations.</p>

<ol>
  <li>Using the Project Owner Blackfire credentials, log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Select an environment.</li>
  <li>Select the Settings tab.</li>
  <li>Enter an e-mail address and click Add Member.</li>
  <li>
    <p>For one account, click the menu by Revoke and select <strong>Promote as an admin</strong>.</p>

    <p><img src="/common/images/cloud_blackfire-member.png" alt="Promote an admin" /></p>
  </li>
</ol>

<h2 id="cloud-int-black-en">Enable Blackfire on your local</h2>
<p>You need to install and configure Blackfire on your local workspace with your working Magento Commerce (Cloud) installation. You don’t need to run these installations directly on the hosted environments, only on your local.</p>

<p>We recommend using their installation guide to walk you through the process:</p>

<ol>
  <li>Log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Select the Integration environment in the <strong>Current Environment</strong> list.</li>
  <li>Select the Settings tab.</li>
  <li>Scroll to the bottom and locate the Server ID and Server Token for the environment. You will need these values for the instructions.</li>
  <li>Open <a href="https://blackfire.io/docs/up-and-running/installation" target="_blank">this guide</a>, select the Operating System, and follow the instructions.</li>
</ol>

<h2 id="dev">Integrate Blackfire in Integration</h2>
<p>We recommend enabling Blackfire in all of your environments including Integration. To integrate, you begin in the Blackfire site. For full details, see <a href="https://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-3-configure-the-server-credentials-the-integration-with-magento-cloud" target="_blank">their guide.</a>. You can integrate with Pro’s Integration environment and Starter’s development branches.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>For Starter plans, pushing your code and <code class="highlighter-rouge">.magento.app.yaml</code> file to Staging and Master branches updates those environments directly. You can directly add Blackfire to those environments the way you do with development.</p>
</div>

<p>These instructions assume you have fully set up your <a href="/guides/v2.2/cloud/before/before-workspace.html">local workspace</a>.</p>

<ol>
  <li>Log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Select the Integration and Development environment in the <strong>Current Environment</strong> list.</li>
  <li>
    <p>Select the Builds tab. In the Builds side panel, click the info icon next to Magento Cloud. This opens a list of commands you will need to execute in order to enable the Blackfire integration.</p>

    <p><img src="/common/images/cloud_blackfire-builds.png" alt="Click info icon" /></p>

    <p>A page like the following opens with additional steps to complete the integration. The marked out content is your Project ID.</p>

    <p><img src="/common/images/cloud_blackfire-integration.png" alt="Blackfire Magento Cloud integragtion" /></p>
  </li>
</ol>

<p>The following sections include instructions for completing this list of integration tasks. You can keep this page open to follow and copy information direcrtly.</p>

<ul>
  <li><a href="#magentoappyaml">Add Blackfire to .magento.app.yaml</a></li>
  <li><a href="#variables">Add project variables</a></li>
  <li><a href="#integration">Add Blackfire integration to the project</a></li>
  <li><a href="#route">Add a default route</a></li>
  <li><a href="#save">Save changes in Blackfire</a></li>
</ul>

<h3 id="magentoappyaml">Add Blackfire to .magento.app.yaml</h3>
<p>To enable and integrate Blackfire into your code, you will modify the <code class="highlighter-rouge">.magento.app.yaml</code> file. You can push these settings into your remote Git branch, merge, and deploy across all environments including Staging and Production.</p>

<p>We recommend working in a branch and creating a snapshot prior to installing. If you have a branch already created, you can skip down to the steps for modifying the <code class="highlighter-rouge">.magento.app.yaml</code> file. If you need instructions creating a branch, complete the following:</p>

<ol>
  <li>SSH into your local Magento workspace.</li>
  <li>
    <p>Log in to your Magento Commerce (Cloud) project.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud login
</code></pre>
    </div>
  </li>
  <li>
    <p>List projects:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud project:list
</code></pre>
    </div>
  </li>
  <li>
    <p>List environments in the project:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud environment:list -p &lt;project ID&gt;
</code></pre>
    </div>
  </li>
  <li>
    <p>See what branch you’re currently in, if any.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git branch
</code></pre>
    </div>
  </li>
  <li>
    <p>If necessary, check out an existing branch:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre>
    </div>

    <p>You can also create a new branch using the <code class="highlighter-rouge">magento-cloud environment:branch</code> command.</p>
  </li>
  <li>
    <p>Back up the environment using a snapshot:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre>
    </div>
  </li>
</ol>

<p>Next, modify the <code class="highlighter-rouge">.magento.app.yaml</code> file:</p>

<ol>
  <li>Use a text editor to locate and edit <code class="highlighter-rouge">&lt;project root dir&gt;/.magento.app.yaml</code> in your branch.</li>
  <li>
    <p>Enter the following code in the <code class="highlighter-rouge">extensions</code> block under <code class="highlighter-rouge">runtime</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>    - name: blackfire
      configuration:
         server_id: "&lt;blackfire Server ID&gt;"
         server_token: "&lt;blackfire Server token&gt;"
</code></pre>
    </div>

    <p>Change <code class="highlighter-rouge">&lt;Blackfire Server ID&gt;</code> and <code class="highlighter-rouge">&lt;Blackfire Server token&gt;</code> to the values from your Blackfire account.</p>

    <p>For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>runtime:
  extensions:
    - mcrypt
    - redis
    - xsl
    - json
    - name: blackfire
      configuration:
         server_id: "12345677890123456789012345678901234567890"
         server_token: "abcdefghi123456-12345667788-odjfvfuvfjvf-29847r87:19283475y6576"
</code></pre>
    </div>
  </li>
  <li>Save your changes to <code class="highlighter-rouge">.magento.app.yaml</code> and exit the text editor.</li>
  <li>
    <p>Add, commit, and push your changes to the environment:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git add -A
git commit -m "&lt;message&gt;"
git push origin
</code></pre>
    </div>

    <p>If errors display during deployment, open <code class="highlighter-rouge">.magento.app.yaml</code> and check the syntax. Check indentation and spelling and try again.</p>
  </li>
</ol>

<h3 id="variables">Add project variables</h3>
<p>Add project variables for Blackfire for the server ID and token. You can add these using the Magento Cloud CLI or the Project Web Interface. The following instructions walk through adding them using CLI commands.</p>

<ol>
  <li>SSH into your local Magento workspace.</li>
  <li>
    <p>Log in to your Magento Commerce (Cloud) project.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud login
</code></pre>
    </div>
  </li>
  <li>Copy the commands from step 3 on the Blackfire Magento Cloud integration page.</li>
  <li>
    <p>Paste and enter the commands in the Magento Cloud CLI. The commands include the Project ID and Blackfire server ID and token. The commands may look like the following:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> magento-cloud --project='&lt;Project ID&gt;' project:variable:set env:BLACKFIRE_SERVER_ID &lt;Blackfire Server ID&gt;
 magento-cloud --project='&lt;Project ID&gt;' project:variable:set env:BLACKFIRE_SERVER_TOKEN &lt;Blackfire Server Token&gt;
</code></pre>
    </div>
  </li>
</ol>

<h3 id="integration">Add Blackfire integration to the project</h3>
<p>Using the Magento Cloud CLI, you will enter an integration command to connect Blackfire with the project. This command requires using an account with super user access. Make sure your Cloud Project account has the <a href="/guides/v2.2/cloud/project/user-admin.html#cloud-user-webinterface">super user option</a> in the Project through the Project Web Interface.</p>

<ol>
  <li>SSH into your local Magento workspace.</li>
  <li>
    <p>Log in to your Magento Commerce (Cloud) project.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud login
</code></pre>
    </div>
  </li>
  <li>
    <p>Copy and enter the integration commands from the Blackfire Magento Cloud integration page.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> magento-cloud integration:add \
 --project='&lt;Project ID&gt;' \
 --type=webhook \
 --url='&lt;Blackfire provided URL&gt;'
</code></pre>
    </div>
  </li>
  <li>A series of requests display for the command. To accept default values, hit enter for the questions. If you receive a permission error, make sure you have super user access for the Magento Commerce (Cloud) project. Either request your permission be upgraded or have someone else who is an admin run this command.</li>
</ol>

<h3 id="route">Add a default route</h3>
<p>If you do not have a default route specified in <code class="highlighter-rouge">routes.yaml</code>, or want to define which route to use instead of the default route, you will add it to Blackfire and <code class="highlighter-rouge">routes.yaml</code>.</p>

<p>Add route information on the Blackfire Magento Cloud integration page:</p>

<ol>
  <li>Locate step 5 and enter the default route. It should look like <code class="highlighter-rouge">https://example.com/</code> or <code class="highlighter-rouge">http://*.{default}/</code>. If you leave this field blank, we will try the following keys in this order: <code class="highlighter-rouge">https://{default}/</code>, <code class="highlighter-rouge">https://www.{default}/</code>, <code class="highlighter-rouge">http://{default}/</code>, <code class="highlighter-rouge">http://www.{default}/</code>.</li>
  <li>If you use a wildcard <code class="highlighter-rouge">*</code> in step 5 for the default rote, you need to enter a resolved value for the <code class="highlighter-rouge">*</code> value in step 6. Otherwise, leave step 6 empty. For example, if you specified the route key <code class="highlighter-rouge">https://*.{default}</code> in step 5, you would need you to specify a route placeholder in step 6.</li>
</ol>

<p>If adding a route to Blackfire, make sure to add the default route to <code class="highlighter-rouge">routes.yaml</code>:</p>

<ol>
  <li>SSH into your local Magento workspace.</li>
  <li>
    <p>Log in to your Magento Commerce (Cloud) project.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud login
</code></pre>
    </div>
  </li>
  <li>
    <p>List projects:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud project:list
</code></pre>
    </div>
  </li>
  <li>
    <p>List environments in the project:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud environment:list -p &lt;project ID&gt;
</code></pre>
    </div>
  </li>
  <li>
    <p>See what branch you’re currently in, if any.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git branch
</code></pre>
    </div>
  </li>
  <li>
    <p>If necessary, check out an existing branch:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre>
    </div>

    <p>You can also create a new branch using the <code class="highlighter-rouge">magento-cloud environment:branch</code> command.</p>
  </li>
  <li>
    <p>Back up the environment using a snapshot:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre>
    </div>
  </li>
  <li>Use a text editor to locate and edit <code class="highlighter-rouge">&lt;project root dir&gt;/magento/routes.yaml</code> in your branch.</li>
  <li>
    <p>Add the route the file. For details, see <a href="(/guides/v2.2/cloud/project/project-conf-files_routes.html)"><code class="highlighter-rouge">routes.yaml</code></a>. Here’s an example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>"http://{default}/":
type: upstream
upstream: "blackfire:php"
</code></pre>
    </div>
  </li>
  <li>Save your changes to <code class="highlighter-rouge">routes.yaml</code> and exit the text editor. It should look like <code class="highlighter-rouge">https://example.com/</code> or <code class="highlighter-rouge">http://*.{default}/</code>.
If you leave this field blank, we will try the following keys in this order: <code class="highlighter-rouge">https://{default}/</code>, <code class="highlighter-rouge">https://www.{default}/</code>, <code class="highlighter-rouge">http://{default}/</code>, <code class="highlighter-rouge">http://www.{default}/</code>.</li>
  <li>
    <p>Add, commit, and push your changes to the environment:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git add -A
git commit -m "&lt;message&gt;"
git push origin
</code></pre>
    </div>

    <p>If errors display during deployment, open <code class="highlighter-rouge">routes.yaml</code> and check the syntax. Check indentation and spelling and try again.</p>
  </li>
</ol>

<h3 id="save">Save changes in Blackfire</h3>
<p>With all integrations entered on the Blackfire Magento Cloud integration page, click Save. All integration settings save to your Blackfire account with saved integrations and conncetions with changes entered to your Magento Commerce (Cloud) project. Continue to the next section to begin profiling your store to verify the integration.</p>

<h2 id="profile">Profile your store</h2>
<p>To verify Blackfire works, you have a couple options: a browser extension or using the CLI. For extensive CLI profiling options and better understanding the profiles, see <a href="#resources">Blackfire’s resources</a>.</p>

<p>To profile using the browser:</p>

<ol>
  <li>Install the Blackfire browser extension in <a href="https://blackfire.io/docs/integrations/chrome#installing-the-companion" target="_blank">Chrome</a> or <a href="https://blackfire.io/docs/integrations/firefox#installing-the-companion" target="_blank">Firefox</a>. A new Blackfire icon displays in your browser next to the address location. If you don’t see it, you may need to display the bar.</li>
  <li>Visit the store or site URL for your specific environment. For example, access the URL for your Integration environment. If you need this URL, you can find it through the Project Web Site. Select the environment branch and copy the link from the Access section.</li>
  <li>
    <p>Click the Blackfire icon to profile. For Compare with, select No Reference.</p>

    <p><img src="/common/images/cloud_blackfire.png" alt="Start profiling" /></p>
  </li>
  <li>Click Profile to start.</li>
</ol>

<p>To profile using the CLI:</p>

<ol>
  <li>SSH into the development or Integration environment. If you need the SSH command, ou can find it through the Project Web Site. Select the environment branch and copy the SSH command from the Access section. Enter the SSH command in a terminal.</li>
  <li>
    <p>Enter the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>php --ri blackfire
</code></pre>
    </div>

    <p>A sample result follows:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>blackfire

Blackfire =&gt; enabled
Blackfire =&gt; 1.10.3
Timing measurement =&gt; cgt
Num of CPU =&gt; 8
Profiling heap memory =&gt; 0 Kb
Main instance trigger mode =&gt; HTTP header triggered
Main instance =&gt; enabled

Main instance info
Output stream =&gt; file
Signature validated =&gt; no
EnvId validated =&gt; no
Fully decoded =&gt; no

Directive =&gt; Local Value =&gt; Master Value
blackfire.agent_socket =&gt; tcp://blackfire.platform.sh:8307 =&gt; tcp://blackfire.platform.sh:8307
blackfire.agent_timeout =&gt; 10 =&gt; 10
blackfire.env_id =&gt; no value =&gt; no value
blackfire.env_token =&gt; no value =&gt; no value
blackfire.log_level =&gt; 1 =&gt; 1
blackfire.log_file =&gt; no value =&gt; no value
</code></pre>
    </div>
  </li>
</ol>

<h2 id="resources">Blackfire resources</h2>
<p>Blackfire provides great information to better profile and investigate the results on their documentation site. Check out some resources:</p>

<ul>
  <li><a href="https://blackfire.io/docs/cookbooks/profiling-http" target="_blank">Profiling HTTP requests</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/profiling-cli" target="_blank">Profiling CLI commands</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/tests" target="_blank">Writing Tests</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/scenarios" target="_blank">Writing scenarios</a></li>
  <li><a href="https://blackfire.io/docs/reference-guide/index" target="_blank">Reference Guide</a> to really understand what you profile</li>
</ul>

<h4 id="related-topics">Related topics</h4>
<ul>
  <li><a href="/guides/v2.2/cloud/project/project-start.html">Get started with a project</a></li>
  <li><a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html"><code class="highlighter-rouge">.magento.app.yaml</code></a></li>
</ul>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/cloud/project/project-integrate-blackfire.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/cloud/project/project-integrate-blackfire.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

